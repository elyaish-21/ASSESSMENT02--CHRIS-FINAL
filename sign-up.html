<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create an Account</title>
  <link href="https://fonts.cdnfonts.com/css/golos-text" rel="stylesheet" />
  <link rel="icon" href="/images/cris_logo.png" type="image/x-icon">

  <style>
    body {
      font-family: 'Golos Text', sans-serif;
      background-color: #f8f7f2;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .container {
      background-color: white;
      padding: 40px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      width: 400px;
      max-width: 90%;
    }

    .container img {
      display: block;
      margin: 0 auto;
      height: 100px;
    }

    h2 {
      text-align: center;
      margin: 10px 0;
    }

    p {
      text-align: center;
      font-size: 14px;
      color: gray;
    }

    p a {
      color: blue;
      text-decoration: none;
    }

    form input,
    form label {
      width: 100%;
      font-size: 14px;
    }

    form input {
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }

    .checkbox-container {
      display: inline-flex;
      align-items: center;
      gap: 2px;
      margin: 10px 0;
      font-size: 14px;
      white-space: nowrap;
    }

    .checkbox-container label,
    .checkbox-container a {
      margin-left: 2px;
      vertical-align: middle;
      white-space: nowrap;
    }

    .checkbox-container a {
      color: blue;
      text-decoration: none;
    }

    .submit-btn {
      width: 100%;
      background-color: #2f5acf;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
    }

    .go-back {
      text-align: center;
      margin-top: 10px;
    }

    .go-back a {
      color: #2f5acf;
      text-decoration: none;
    }

    #sms-confirmation,
    #terms-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      max-width: 500px;
    }

    .modal-content p {
      text-align: justify;
    }

    .modal-content h3 {
      margin-bottom: 10px;
    }

    .modal-content button {
      padding: 10px 20px;
      background-color: #1fb133;
      color: white;
      border: none;
      border-radius: 5px;
      margin-top: 15px;
      cursor: pointer;
    }

    .agree-btn {
      background-color: #1fd43b;
    }
  </style>
</head>

<body>
  <div class="container">
    <img src="images/logo-chris.png" alt="City Civil Registry Logo">
    <h2>Create an Account</h2>
    <p>Already have an account? <a href="login-page.html">Sign in here</a></p>

    <form id="signup-form">
      <label for="firstname">First Name</label>
      <input type="text" id="firstname" required>

      <label for="lastname">Last Name</label>
      <input type="text" id="lastname" required>

      <label for="email">Email</label>
      <input type="email" id="email" required>

       <label for="mobile">Mobile Number</label>
        <input type="tel" id="mobile" name="mobile" required placeholder="09XX-XXX-XXXX" maxlength="13">
        <small id="mobileError" style="color: red; display: none;">Format must be 09XX-XXX-XXXX</small>


      <br>
      <label for="password">Password</label>
      <input type="password" id="password" required>
      <small>Use 8 or more characters with a mix of letters, numbers & symbols.</small>

      <label for="confirm-password">Confirm Password</label>
      <input type="password" id="confirm-password" required>

      <div class="checkbox-container">
        <input type="checkbox" id="terms" required>
        <label for="terms">I Agree</label>
        <a href="#" id="view-terms">Terms and Conditions</a>
      </div>

      <button class="submit-btn" type="submit">Submit</button>
    </form>

    <div class="go-back">
      <a href="index.html">Go Back Home</a>
    </div>
  </div>

  <!-- SMS Confirmation Popup -->
  <div id="sms-confirmation">
    <div class="modal-content">
      <h3>Thank you for creating an account!</h3>
      <p>Redirecting to login page...</p>
    </div>
  </div>

  <!-- Terms and Conditions Modal -->
  <div id="terms-modal">
    <div class="modal-content">
      <h3>PRIVACY NOTICE</h3>
      <p><strong>Terms and Conditions for Account Registration</strong><br>
        By creating an account on the Civil Registry Information System (CRIS), you agree to provide accurate and
        truthful personal information and to use the system solely for lawful and official purposes related to civil
        registration services. You must be at least 18 years old and legally capable of entering into this agreement.
      </p>
      <p>You are responsible for maintaining the confidentiality of your account credentials and for any activity that
        occurs under your account. Unauthorized use, submission of false information, or attempts to access restricted
        areas of the system may result in suspension or termination of your access and may lead to legal action.</p>
      <p>Your personal data will be handled in accordance with our Privacy Policy and applicable data protection laws.
        By registering, you consent to the collection and processing of your information for official civil registry
        functions. CRIS may update these terms at any time, and continued use of your account implies acceptance of any
        changes.</p>
      <button class="agree-btn" onclick="closeTermsModal()">AGREE</button>
    </div>
  </div>

  <div class="gtranslate_wrapper"></div>
  <script>
    window.gtranslateSettings = {
      "default_language": "en",
      "wrapper_selector": ".gtranslate_wrapper",
      "switcher_horizontal_position": "right",
      "switcher_vertical_position": "bottom",
      "flag_style": "3d"
    }
  </script>
  <script src="https://cdn.gtranslate.net/widgets/latest/float.js" defer></script>

  <script>
    document.getElementById('signup-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const firstname = document.getElementById('firstname').value.trim();
      const lastname = document.getElementById('lastname').value.trim();
      const email = document.getElementById('email').value.trim();
      const mobile = document.getElementById('mobile').value.trim();
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      const termsChecked = document.getElementById('terms').checked;

      if (!firstname || !lastname || !email || !mobile || !password || !confirmPassword || !termsChecked) {
        alert('Please complete all fields and agree to the terms.');
        return;
      }

      if (password.length < 8) {
        alert('Password must be at least 8 characters long.');
        return;
      }

      if (password !== confirmPassword) {
        alert('Passwords do not match.');
        return;
      }

      let users = JSON.parse(localStorage.getItem('users')) || [];
      if (users.find(user => user.email === email)) {
        alert('An account with this email already exists.');
        return;
      }

      users.push({ firstname, lastname, email, mobile, password });
      localStorage.setItem('users', JSON.stringify(users));

      document.getElementById('sms-confirmation').style.display = 'flex';
      this.reset();

      setTimeout(() => {
        window.location.href = 'login-page.html';
      }, 3000);
    });

    // Terms modal logic
    document.getElementById('view-terms').addEventListener('click', function (e) {
      e.preventDefault();
      document.getElementById('terms-modal').style.display = 'flex';
    });

    function closeTermsModal() {
      document.getElementById('terms-modal').style.display = 'none';
    }
  </script>
  <script>
    const mobileInput = document.getElementById("mobile");
    const mobileError = document.getElementById("mobileError");
    const pattern = /^09\d{2}-\d{3}-\d{4}$/;

    mobileInput.addEventListener("input", () => {
      let numbersOnly = mobileInput.value.replace(/\D/g, ""); // Remove non-digits

      // Auto-format to 09XX-XXX-XXXX
      if (numbersOnly.length > 4 && numbersOnly.length <= 7) {
        mobileInput.value = `${numbersOnly.slice(0, 4)}-${numbersOnly.slice(4)}`;
      } else if (numbersOnly.length > 7) {
        mobileInput.value = `${numbersOnly.slice(0, 4)}-${numbersOnly.slice(4, 7)}-${numbersOnly.slice(7, 11)}`;
      } else {
        mobileInput.value = numbersOnly;
      }

      // Real-time validation
      if (pattern.test(mobileInput.value)) {
        mobileError.style.display = "none";
        mobileInput.setCustomValidity("");
      } else {
        mobileError.style.display = "inline";
        mobileInput.setCustomValidity("Invalid format");
      }
    });
</script>
</body>

</html>